<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NAFIN te capacita</title>
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/nafin.css">
    <link rel="stylesheet" href="./css/courses.css">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8LFCBNTZGM"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-8LFCBNTZGM');
    </script>
    <style>
        .modal-lg{
            max-width: 90%;
        }
    </style>
</head>


<body>


    <nav class="navbar navbar-expand-lg navbar-dark bg-dark px-sm-5 py-1 fixed-top shadow-sm" style="font-size: 14px; min-height: 70px;">

        <a class="navbar-brand" href="index.html"><img src="./resources/nacionalfinanciera.svg" width="280px" id="img-header"
                style="padding-top: 10px; padding-bottom: 10px;"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse " id="navbarNavDropdown">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="index.html">Inicio</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="cursos.html">Explora</a>
                </li>
              <!-- <li class="nav-item">
                    <a class="nav-link" href="eventos.html">Eventos</a>
                </li> -->
                <li class="nav-item">
                    <a class="nav-link" href="capsulas.html">Cápsulas</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="blog.html">Artículos</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="contacto.html">Contacto</a>
                </li>

            </ul>
        </div>
                
    </nav>

    <!-- <div id="header" class="px-md-4">

        <div data-aos="fade-up" class=" mt-2 row justify-content-center" style="position: relative;">

            <div class="col-auto">
                <div class="col-auto text-title">Capacitación y asistencia técnica, en formato <span
                        class="font-weight-bold">presencial</span>,
                    <span class="font-weight-bold">virtual</span> y <span class="font-weight-bold">en línea</span> de
                    acuerdo a tus necesidades
                </div>
            </div>
            <div class="col-auto align-self-center">
                <div class="btn-1 ">#NafinTeCapacita</div>
            </div>
        </div>

        <div id="main-menu" data-aos="zoom-in" class="row justify-content-center px-5 px-md-0"
            style="margin-top: 32px;"></div>
    </div> -->

    <div id="cursos-header" style="margin-top: 68px;" class="row mx-0">
        <div id="cursos-header-textura" class="col-md-4 col-sm-12 d-flex align-items-center">
            <div data-aos="zoom-in" class="row justify-content-center mx-auto px-4 px-md-0 " id="btn-4s">
                <div id="main-menu" class="px-1"></div>
            </div>
        </div>

        <div id="cursos-header-1" class="col-md-8 col-sm-12 d-flex align-items-center"
            style="background-image: url('resources/texturablancadelheader550x674.png'); background-repeat: no-repeat; height: 582px;">
            <div data-aos="fade-up" class="mx-auto px-5" style="max-width: 600px;">
                <div style="font-weight: bold; font-size: 36px; line-height: 40px;" class="text-black">
                    #Nafintecapacita</div>
                <div style="font-size: 23px;" id="header-subtitle" class="mb-2 text-black mt-1">Capacitación y
                    asistencia
                    técnica, en formato <span class="font-weight-bold">presencial</span>,
                    <span class="font-weight-bold">virtual</span> y <span class="font-weight-bold">en línea</span> de
                    acuerdo a tus necesidades
                </div>
                <div class="" id="header-article-content"></div>
            </div>
        </div>
    </div>

    <div class="mb-5">

        <div class="course-section mt-5">
            <div id="course-list-content"></div>
        </div>

    </div>
    <footer style="background-color: #691c32;" class="text-white py-3">
        <div class="row mx-auto px-2 px-md-0" style="max-width: 1050px;">
            <div class="col-12 col-sm-6 col-md-4 col-lg-4 mb-3" style="font-size: 12px;">
                <div style="max-width: 300px;">
                    <div class="mb-4">
                        <img src="./resources/nacionalfinanciera.svg" width="220px">
                    </div>
                    <div class="d-flex mb-4 align-items-center">
                        <img src="./resources/cellphone.svg" class="mr-3" width="30px">
                        800 NAFINSA (623-4672)
                    </div>
                    <div class="d-flex mb-4 align-items-center">
                        <img src="./resources/ubicacion2.svg" class="mr-3" width="30px">
                        Insurgentes Sur 1971, Guadalupe Inn, Álvaro Obregón, CDMX, C.P. 01020
                    </div>
                    <div class="d-flex mb-4 align-items-center">
                        <img src="./resources/correo.svg" class="mr-3" width="30px">
                        ayuda@nafintecapacita.com
                    </div>

                </div>
            </div>
            <div class="col-12 col-sm-6 col-md-4 col-lg-auto mb-4">
                <div class="underlined underlined-footer footer-title mb-4">El Banco</div>
                <div class="footer-link mb-2">Acerca de NAFIN</div>
                <div class="footer-link mb-2">Artículos</div>
                <div class="footer-link mb-2">Contacto</div>
                <div class="footer-link mb-2"></div>
            </div>
            <div class="col-12 col-sm-6 col-md-4 col-lg-auto mb-4">
                <div class="underlined underlined-footer footer-title mb-4">Enlaces</div>
                <div class="footer-link mb-2">Cursos</div>
                <div class="footer-link mb-2">Eventos</div>
                <div class="footer-link mb-2">Noticias</div>
                <div class="footer-link mb-2">Opiniones</div>
            </div>
            <div class="col-12 col-sm-6 col-md-4 col-lg-auto mb-4">
                <div class="underlined underlined-footer footer-title mb-4">Gobierno de México</div>
                <div class="footer-link mb-2">Participa</div>
                <div class="footer-link mb-2">Publicaciones Oficiales</div>
                <div class="footer-link mb-2">Marco Jurídico</div>
                <div class="footer-link mb-2">Plataforma Nacional de Transparencia</div>
                <div class="footer-link mb-2">Alerta</div>
                <div class="footer-link mb-2">Denuncia</div>
            </div>
            <div class="col-12 col-sm-6 col-md-4 col-lg-auto mb-4">
                <div class="underlined underlined-footer footer-title mb-4">Síguenos en</div>
                <a href="https://www.facebook.com/CapacitacionEmpresarialNafin/">
                    <img src="./resources/Facebook.svg" class="mr-3" width="30px">
                </a>
                <a href="https://twitter.com/CE_Nafin">
                    <img src="./resources/Twitter.svg" class="" width="30px">
                </a>
            </div>
            <div class="col-12 px-5">
                <hr class="mt-2" color="#fff" style="height: 1px;">
            </div>
            <div class="col-12 text-center mt-2" style="font-size: 11px; color: #dfdddd;">
                Copyright Nacional Financiera 2022
            </div>
        </div>
    </footer>

    <template class="d-none" id="article-template">
        {{#articles}}

        <div class="article-item mt-5" data-aos="fade-up">
            <button class="{{textColor}} font-weight-bold text-left pl-4" type="button" data-toggle="collapse"
                data-target="#{{tipo}}"
                style="width: 850px; max-width: 100%; height: 100px; background: {{color}} url({{pathTextura}}); background-repeat: no-repeat; border-top-right-radius: 50px; border-bottom-right-radius: 50px; border: none; font-size: 28px; box-shadow: 16px 10px 20px #999999;">
                <img src="{{pathVineta}}" width="18px" class="mr-2">
                {{titulo}}
            </button>

            <div class="collapse show" id="{{tipo}}">
                <div class="ml-5 mt-4">
                    
                    {{#contentList}}
                    <div class="mt-2">
                        <a href="{{link}}"><img src="{{pathClick}}" width="28px" class="mr-1"> {{content}} </a>
                    </div>
                    {{/contentList}}
                    <div class="row">
                    {{#cardList}}
                    
                    
                        <div class="col-sm offset-sm-12">
                             <div class="card" style="width: 18rem; ">
                                <!-- <div class="card-body" style="background:#691c32 url(./resources/texturacafedeloscursos510x100.png);height:90px;">
                                    <h5 class="card-title text-center font-weight-bold" >{{content}}</h5>
                                </div> -->
                                <div class="card-body" style="background: transparent url({{linkimagen}}); width:440px; height: 219px;">
                                    <h5 class="card-title text-center font-weight-bold"style="width:50%; " >{{content}}</h5>
                                   <p class="card-text" style="width:50%; font-size: 15px;">{{duracion}}</p>
                                   <a href="#" class="btn btn-primary text-white" style="background-color:#691c32; margin-left: 10%;;" data-toggle="modal" data-target=".bd-example-modal-lg{{tipon}}">ver cursos</a>
                                   

                                   <div class="modal fade bd-example-modal-lg{{tipon}}" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" >
                                     <div class="modal-dialog modal-lg" role="document"style="width:100%;height:80%;">
                                       <div class="modal-content" style="width:100%;height:100%;">
                                        <embed src="{{link}}" type="application/pdf" width="100%" height="100%" />
                                       </div>
                                     </div>
                                   </div>

                                </div>
                            </div>
                    
                        </div>
                    
                    {{/cardList}}
                </div>


                </div>
            </div>
        </div>

        {{/articles}}
    </template>

    <template class="d-none" id="menu-template">
        {{#categorias}}
        <div class="col-12 col-sm-12  mb-1 px-1 px-md-0 mb-4 text-center">
            <div class="d-flex align-items-center btn-5" data="{{categoria}}">
                <img src="{{img}}.svg" width="55px" height="50px" class="img-g">
                <img src="{{img}}-w.svg" width="55px" height="50px" class="d-none img-w">
                <div class="ml-1 w-100">
                    <div class="font-weight-bold" style="font-size: 17px;">{{nombre}}</div>
                </div>
            </div>
        </div>
        {{/categorias}}
    </template>

    <template class="d-none" id="article-header-template">
        {{#categorias}}
        <div class="justify-content-center align-self-center mt-4" data-aos="fade-right">
            <div class="courses-header align-items-center">
                <div class="float-left mr-3">
                    <img src="./resources/objetivo-vino.svg"
                        onerror="this.onerror=null; this.src='./resources/maps/iconostablaestados/70.svg'" alt=""
                        width="42" height="42" style="fill: black;">
                </div>
                <div class="d-flex" style="height: 50px">

                    <div class="align-self-center text-black" style="font-size: 23px;">Dirigido a <span
                            class="font-weight-bold">{{dirijido}}</span></div>
                </div>
            </div>
        </div>
        <div class="mt-3 mt-lg-1">
            <div class="courses-header align-items-center d-flex" data-aos="fade-left">
                <div class="float-left mr-2">
                    <img src="./resources/70-vino.svg"
                        onerror="this.onerror=null; this.src='./resources/maps/iconostablaestados/70.svg'" alt=""
                        width="51" height="51">
                </div>
                <div class="text-black" style="font-size: 23px;">{{descripcion}}</div>
            </div>
        </div>
        {{/categorias}}


    </template>
    <!-- <template class="d-none" id="card-template">
        {{#cards}}

        <div class="article-item mt-5" data-aos="fade-up">
            <button class="{{textColor}} font-weight-bold text-left pl-4" type="button" data-toggle="collapse"
                data-target="#{{tipo}}"
                style="width: 850px; max-width: 100%; height: 100px; background: {{color}} url({{pathTextura}}); background-repeat: no-repeat; border-top-right-radius: 50px; border-bottom-right-radius: 50px; border: none; font-size: 28px; box-shadow: 16px 10px 20px #999999;">
                <img src="{{pathVineta}}" width="18px" class="mr-2">
                {{titulo}}
            </button>

            <div class="collapse show" id="{{tipo}}">
                <div class="ml-5 mt-4">
                    {{#contentList}}
                    <div class="mt-2">
                        <a href="{{link}}"><img src="{{pathClick}}" width="28px" class="mr-1"> {{content}} </a>
                    </div>
                    {{/contentList}}

                </div>

            </div>
        </div>

        {{/cards}}
    </template> -->



    <script type="text/javascript" src="./js/jquery-3.5.1.min.js"></script>
    <script type="text/javascript" src="./js/bootstrap.min.js"></script>
    <script type="text/javascript" src="./js/mustache.min.js"></script>
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            AOS.init({
                // Global settings:
                disable: false, // accepts following values: 'phone', 'tablet', 'mobile', boolean, expression or function
                startEvent: 'DOMContentLoaded', // name of the event dispatched on the document, that AOS should initialize on
                initClassName: 'aos-init', // class applied after initialization
                animatedClassName: 'aos-animate', // class applied on animation
                useClassNames: false, // if true, will add content of `data-aos` as classes on scroll
                disableMutationObserver: false, // disables automatic mutations' detections (advanced)
                debounceDelay: 50, // the delay on debounce used while resizing window (advanced)
                throttleDelay: 99, // the delay on throttle used while scrolling the page (advanced)


                // Settings that can be overridden on per-element basis, by `data-aos-*` attributes:
                offset: 120, // offset (in px) from the original trigger point
                delay: 0, // values from 0 to 3000, with step 50ms
                duration: 800, // values from 0 to 3000, with step 50ms
                easing: 'ease', // default easing for AOS animations
                once: false, // whether animation should happen only once - while scrolling down
                mirror: false, // whether elements should animate out while scrolling past them
                anchorPlacement: 'top-bottom', // defines which position of the element regarding to window should trigger the animation

            });


            const params = new Proxy(new URLSearchParams(window.location.search), {
                get: (searchParams, prop) => searchParams.get(prop),
            });

            console.log(params.sector);
            var sector = params.sector === null || "" ? "CEF" : params.sector;
            console.log("sector");
            console.log(sector);



            $(document).on('click touchstart', '#cursos-header #main-menu .btn-5', function () {
                $("#main-menu .btn-5").removeClass("btn-5-selected");
                $(this).addClass("btn-5-selected");

                //habillitar todos los cafes
                $(".img-g").removeClass("d-none");
                //desactivar todos los blancos
                $(".img-w").addClass("d-none");
                //desabilitar cafe actua                $(this).find(".img-g").addClass("d-none");
                //activar blanco actual
                $(this).find(".img-w").removeClass("d-none");

                var category = $(this).attr("data");
                $.getJSON('./js/articles.json', function (data) {
                    displayMenuOption(data, category);
                });
            });

            inicializaMenu(sector);



        });



        function inicializaMenu(sector) {

            $.getJSON('./js/articles.json', function (data) {

                //renderiza menu
                var menuTemplate = $('#menu-template').html();
                var menuText = Mustache.render(menuTemplate, data);
                $("#main-menu").html(menuText);
                displayMenuOption(data, sector);

                $("#cursos-header #main-menu .btn-5[data='" + sector + "']").click();



            });

        }

        function displayMenuOption(data, categoryParam) {
            //renderiza encabezado descripcion
            var cgyFilter = {
                categorias: data.categorias.filter(category => category.categoria === categoryParam)
            };

            var artHeadTemplate = $('#article-header-template').html();
            var artHeadText = Mustache.render(artHeadTemplate, cgyFilter);
            $("#header-article-content").html(artHeadText);

            //renderiza articulos
            var articles = data.articles.filter(article => article.tags.categoria.includes(categoryParam));
            //setea propiedades dinámicas
            articles.forEach(a => {
                if (a.tipo == 'CP') {
                    a.pathClick = "./resources/clickverde.svg";
                    a.pathTextura = "./resources/texturaverdedeloscursos510x100.png";
                    a.pathVineta = "./resources/vineta.svg";
                    a.color = "#10302b";
                    a.textColor = "text-white";
                } else if (a.tipo == 'CVD') {
                    a.pathClick = "./resources/clickvino.svg";
                    a.pathTextura = "./resources/texturasrojadeloscursos510x100.png";
                    a.pathVineta = "./resources/vineta.svg";
                    a.color = "#691c32";
                    a.textColor = "text-white";
                } else if (a.tipo == 'L') {
                    a.pathClick = "./resources/clickcafe.svg";
                    a.pathTextura = "./resources/texturacafedeloscursos510x100.png";
                    a.pathVineta = "./resources/vinetanegra.svg";
                    a.color = "white";
                    a.textColor = "text-black";
                } else {
                    a.pathClick = "./resources/clickgris.svg";
                    a.pathTextura = "./resources/texturagrisdeloscursos510x100.png";
                    a.pathVineta = "./resources/vineta.svg";
                    a.color = "#414141";
                    a.textColor = "text-white";
                }
            });
            var artFilter = {
                articles: articles
            };

            var artTemplate = $('#article-template').html();
            var artText = Mustache.render(artTemplate, artFilter);
            $("#course-list-content").html(artText);
        }
    </script>
</body>

</html>